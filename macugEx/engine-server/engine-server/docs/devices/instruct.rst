指令结构
==========

指令分为头部和内容部分,头部为4字节长度,内容为具体指令json格式内容。

::

    --------------------------------------------------
    |  数据长度(4 byte)  |      数据内容(json格式)
    --------------------------------------------------

数据长度字段为大端序,
指令数据含有以下通用字段:

* type

    指令类型;

* ident

    指令序号,随机数字,一段时间内不重复即可,用于服务端与客户端确认指令收发情况;

以下指令都以内容作为说明,长度字段不标明,仅供参考;

具体处理由 :doc:`../device` 处理;

01 登录
-------

客户端发送::

    {
        'type': 1,
        'imei': '355372020827303',
        'heartbeat': 300,
        'ident': 0,
    }

服务端返回::

    {
        'type': 1,
        'status': 200,
        'ident': 0,
    }

02 对时
-------

客户端发送::

    {
        'type': 2,
        'ident': 126,
    }

服务端返回::

    {
        'type': 2,
        'timestamp': 1438998015,
        'ident': 126,
    }

03 心跳
-------

客户端发送::

    {
        'type': 3,
        'ident': 7665,
    }

服务端返回::

    {
        'type': 3,
        'ident': 7665,
    }

